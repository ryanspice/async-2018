!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("async-template-library",[],t):"object"==typeof exports?exports["async-template-library"]=t():e["async-template-library"]=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/index.js")}({"./node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"./node_modules/loglevel/lib/loglevel.js":function(e,t,r){var n,o;!function(l,_){"use strict";void 0===(o="function"==typeof(n=function(){var e=function(){},t="undefined",r=["trace","debug","info","warn","error"];function n(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(t,n){for(var o=0;o<r.length;o++){var l=r[o];this[l]=o<t?e:this.methodFactory(l,t,n)}this.log=this.debug}function l(r,l,_){return function(r){"debug"===r&&(r="log");return typeof console!==t&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):e)}(r)||function(e,r,n){return function(){typeof console!==t&&(o.call(this,r,n),this[e].apply(this,arguments))}}.apply(this,arguments)}function _(e,n,_){var i,a=this,s="loglevel";function c(){var e;if(typeof window!==t){try{e=window.localStorage[s]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(s)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}e&&(s+=":"+e),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=_||l,a.getLevel=function(){return i},a.setLevel=function(n,l){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==l&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window===t)return;try{return void(window.localStorage[s]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+n+";"}catch(e){}}(n),o.call(a,n,e),typeof console===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){c()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var p=c();null==p&&(p=null==n?"WARN":n),a.setLevel(p,!1)}var i=new _,a={};i.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=a[e];return t||(t=a[e]=new _(e,i.getLevel(),i.methodFactory)),t};var s=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=s),i},i.getLoggers=function(){return a},i})?n.call(t,r,t,e):n)||(e.exports=o)}()},"./src/core/def/loop.js":function(e,t,r){"use strict";var n=r("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=r.n(n);let l,_=[],i=0,a=0,s=()=>{};const c=[];const p=async function(e,t){return await(c[e]=await new class{constructor(e,t){return o()(this,"id",void 0),o()(this,"value",void 0),this.id=e,this.value=t,this}}(e,t))},u=async function(){return 0,_[a]=await p(a,_[a]),_[a]};t.a=async function(e,t){if(null===_)for(l=_.length=0;l>=0;l--)_[l]=p(-1,{});for(_=e[0],i=_.length||0,s=t;a<i;a++)await s(await u());a=0}},"./src/core/def/template.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AsyncRenderPipe});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/defineProperty.js"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__),_loop__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core/def/loop.js"),loglevel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/loglevel/lib/loglevel.js"),loglevel__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_2__),_template_empty_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core/template/empty.data.js");__webpack_require__.d(__webpack_exports__,"b",function(){return _template_empty_data__WEBPACK_IMPORTED_MODULE_3__.a});let trace=0;const _props=["id","ref","value","class","className","click","onclick","onresize","oninput","activity","innerHTML"];class AsyncRenderer{constructor(e,t=(()=>{}),r=(()=>{})){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"context",document),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"template",_template_empty_data__WEBPACK_IMPORTED_MODULE_3__.a),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"props",_props),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"elms",[]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"defer",[]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"elements",[]),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"trace",0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"scrollcount",0),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"createTemplateItem",async e=>{const t=await this.createElementOfType(e.value);t&&(this.elms[e.id]=this.elements[e.id]=t,t.template=e.id)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"check",async e=>{const t=e.id;let r=this.elms[t];if(r&&r.renderTo){switch(typeof r.renderTo){case"string":let e=this.elms[t];r=this.elms[t]=await this.createElementOfType(e)}if(this.scrollcount++,"scroll"==r.renderTo.id){if(0==r.renderTo.children.length)return void r.renderTo.appendChild(r,null);if(r.renderTo.appendBefore=((e,t)=>{e.parentNode.insertBefore(t,e)}),r.renderTo.appendAfter=((e,t)=>{e.parentNode.insertBefore(t,e.nextSibling)}),"plus"==r.id)return void r.renderTo.appendBefore(r.renderTo.children[0],r);r.renderTo.insertBefore(r,r.renderTo.children[0].nextSibling)}else this.elms[t].renderTo.appendChild(this.elms[t],null);this.elms[t]=null}}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"onComplete",()=>{});const n=this.context.onreadystatechange;if(this.context.state=0,"complete"===this.context.readyState)return n&&n(),t(),r(),this.template[0]=e,void this.init();this.context.onreadystatechange=(async o=>{switch(n&&n(),this.context.state){case 0:t(),this.context.state++;break;case 1:r(),this.context.state++,this.template[0]=e,this.init()}})}async init(){return this.context=document,await this.iterateTemplate()}async iterateTemplate(){return loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.info("iterateTemplate"+trace,this.template),trace?(loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("renderer::"+trace),!1):(trace++,await Object(_loop__WEBPACK_IMPORTED_MODULE_1__.a)(this.template,this.createTemplateItem),await Object(_loop__WEBPACK_IMPORTED_MODULE_1__.a)(this.template,this.check),this.elms=await this.defer,await Object(_loop__WEBPACK_IMPORTED_MODULE_1__.a)([this.defer],this.createTemplateItem),await Object(_loop__WEBPACK_IMPORTED_MODULE_1__.a)(this.template,this.check),this.elms=this.defer,!((this.defer=await this.elms.filter(e=>e?e.ref:null)).length>0)||(trace--,this.template=await([this.defer]),this.defer=[],this.elms=await([]),await this.iterateTemplate()))}async createElementOfType(template){const type=template.type;type||loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Async.2018 tried to render an `undefined` element");const target=await this.createRenderTarget(template);target||loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Async.2018 cannot find a target to render to");const elm=await this.context.createElement(template.type);switch(elm||loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Async.2018 could not create element",template),elm.ref=template.ref,elm.afterConstruct=template.afterConstruct,type){case"style":elm.innerHTML=template.value,elm.renderTo=await this.context.head;break;default:elm.oninput=template.oninput,template.onclick&&(elm.onclick=(evt=>{evt.stopPropagation(),"function"==typeof template.onclick?template.onclick():eval(template.onclick)})),elm.style=template.style,elm.value=template.value,elm.renderTo=target}return"2430"===target?(await this.defer.push(template),!1):(await this.populateProps(this.props,template,elm),this.afterConstruct(elm),elm)}async createRenderTarget(e){return void 0!=e.renderTo&&void 0==this.context.querySelectorAll(e.renderTo)[0]?"2430":this.context.querySelectorAll(e.renderTo)[0]||this.context.body}async populateProps(e,t,r){for(let n in e){const o=e[n];t[o]&&(r[o]=t[o])}}afterConstruct(e){e.afterConstruct&&e.afterConstruct()}}class AsyncRenderPipe extends AsyncRenderer{}},"./src/core/def/utils.js":function(e,t){Object.prototype.insertAfter=function(e){this.parentNode.insertBefore(e,this.nextSibling)}},"./src/core/template/empty.data.js":function(e,t,r){"use strict";t.a=[{type:"section",style:"text-align:center;",innerHTML:"\n\t\t\t<p>No Template Loaded</p>\n\t\t"}]},"./src/index.js":function(e,t,r){"use strict";r.r(t);r("./src/core/def/utils.js");var n=r("./src/core/def/template.js"),o={template:{data:n.b,AsyncRenderPipe:n.a}};t.default={core:o,name:"core"}}})});
//# sourceMappingURL=async-template.js.map